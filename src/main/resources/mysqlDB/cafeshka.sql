-- MySQL Script generated by MySQL Workbench
-- Mon May  9 13:47:05 2022
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema cafeshka
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema cafeshka
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `cafeshka` DEFAULT CHARACTER SET utf8 ;
USE `cafeshka` ;

-- -----------------------------------------------------
-- Table `cafeshka`.`Customers`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `cafeshka`.`Customers` (
  `id` INT NOT NULL,
  `name` VARCHAR(50) NULL,
  `address` VARCHAR(50) NULL,
  `city` VARCHAR(50) NULL,
  `email` VARCHAR(50) NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `cafeshka`.`Vendors`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `cafeshka`.`Vendors` (
  `id` INT NOT NULL,
  `name` VARCHAR(50) NOT NULL,
  `address` VARCHAR(50) NOT NULL,
  `email` VARCHAR(50) NOT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `cafeshka`.`recipies`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `cafeshka`.`recipies` (
  `id` INT NOT NULL,
  `name` VARCHAR(50) NOT NULL,
  `description` VARCHAR(50) NOT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `cafeshka`.`categoriesprod`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `cafeshka`.`categoriesprod` (
  `id` INT NOT NULL,
  `name` VARCHAR(50) NOT NULL,
  `description` VARCHAR(50) NOT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `cafeshka`.`Products`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `cafeshka`.`Products` (
  `id` INT NOT NULL,
  `vendid` INT NOT NULL,
  `name` VARCHAR(50) NOT NULL,
  `price` DECIMAL(8,2) NOT NULL,
  `description` VARCHAR(50) NOT NULL,
  `recipeid` INT NOT NULL,
  `categoryid` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `vendid_idx` (`vendid` ASC)   ,
  INDEX `recipeid_idx` (`recipeid` ASC)   ,
  INDEX `categoryid_idx` (`categoryid` ASC)   ,
  CONSTRAINT `vendid`
    FOREIGN KEY (`vendid`)
    REFERENCES `cafeshka`.`Vendors` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `recipeid`
    FOREIGN KEY (`recipeid`)
    REFERENCES `cafeshka`.`recipies` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `categoryid`
    FOREIGN KEY (`categoryid`)
    REFERENCES `cafeshka`.`categoriesprod` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `cafeshka`.`Couriercompanies`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `cafeshka`.`Couriercompanies` (
  `id` INT NOT NULL,
  `name` VARCHAR(50) NOT NULL,
  `address` VARCHAR(50) NOT NULL,
  `email` VARCHAR(50) NOT NULL,
  `site` VARCHAR(50) NOT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `cafeshka`.`Couriers`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `cafeshka`.`Couriers` (
  `id` INT NOT NULL,
  `name` VARCHAR(50) NOT NULL,
  `surname` VARCHAR(50) NOT NULL,
  `phone` VARCHAR(50) NOT NULL,
  `companyid` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `companyid_idx` (`companyid` ASC)   ,
  CONSTRAINT `companyid`
    FOREIGN KEY (`companyid`)
    REFERENCES `cafeshka`.`Couriercompanies` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `cafeshka`.`Cafe`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `cafeshka`.`Cafe` (
  `id` INT NOT NULL,
  `name` VARCHAR(50) NOT NULL,
  `address` VARCHAR(50) NOT NULL,
  `site` VARCHAR(50) NOT NULL,
  `email` VARCHAR(50) NOT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `cafeshka`.`Positions`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `cafeshka`.`Positions` (
  `id` INT NOT NULL,
  `nameposition` VARCHAR(50) NOT NULL,
  `namedepart` VARCHAR(50) NOT NULL,
  `salary` INT NOT NULL,
  `cafeid` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `cafeid_idx` (`cafeid` ASC)   ,
  CONSTRAINT `cafeid`
    FOREIGN KEY (`cafeid`)
    REFERENCES `cafeshka`.`Cafe` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `cafeshka`.`Workers`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `cafeshka`.`Workers` (
  `id` INT NOT NULL,
  `name` VARCHAR(50) NOT NULL,
  `surname` VARCHAR(50) NOT NULL,
  `address` VARCHAR(50) NOT NULL,
  `phone` VARCHAR(50) NOT NULL,
  `email` VARCHAR(50) NOT NULL,
  `positionid` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `positionid_idx` (`positionid` ASC)   ,
  CONSTRAINT `positionid`
    FOREIGN KEY (`positionid`)
    REFERENCES `cafeshka`.`Positions` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `cafeshka`.`Orders`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `cafeshka`.`Orders` (
  `id` INT NOT NULL,
  `date` DATETIME(3) NOT NULL,
  `custid` INT NOT NULL,
  `cashierid` INT NOT NULL,
  `prodid` INT NOT NULL,
  `quantity` INT NOT NULL,
  `courierid` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `custid_idx` (`custid` ASC)   ,
  INDEX `prodid_idx` (`prodid` ASC)   ,
  INDEX `courierid_idx` (`courierid` ASC)   ,
  INDEX `cashierid_idx` (`cashierid` ASC)   ,
  CONSTRAINT `custid`
    FOREIGN KEY (`custid`)
    REFERENCES `cafeshka`.`Customers` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `prodid`
    FOREIGN KEY (`prodid`)
    REFERENCES `cafeshka`.`Products` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `courierid`
    FOREIGN KEY (`courierid`)
    REFERENCES `cafeshka`.`Couriers` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `cashierid`
    FOREIGN KEY (`cashierid`)
    REFERENCES `cafeshka`.`Workers` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `cafeshka`.`Currencies`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `cafeshka`.`Currencies` (
  `id` INT NOT NULL,
  `name` VARCHAR(50) NOT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `cafeshka`.`Receivers`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `cafeshka`.`Receivers` (
  `id` INT NOT NULL,
  `name` VARCHAR(50) NOT NULL,
  `phone` VARCHAR(50) NOT NULL,
  `email` VARCHAR(255) NOT NULL,
  `address` VARCHAR(50) NOT NULL,
  PRIMARY KEY (`id`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `cafeshka`.`Invoices`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `cafeshka`.`Invoices` (
  `id` INT NOT NULL,
  `date` DATETIME(3) NOT NULL,
  `receiverid` INT NOT NULL,
  `description` VARCHAR(50) NOT NULL,
  `volume` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `receiverid_idx` (`receiverid` ASC)   ,
  CONSTRAINT `receiverid`
    FOREIGN KEY (`receiverid`)
    REFERENCES `cafeshka`.`Receivers` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `cafeshka`.`payments`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `cafeshka`.`payments` (
  `id` INT NOT NULL,
  `invoiceid` INT NOT NULL,
  `currencyid` INT NOT NULL,
  `accountantid` INT NOT NULL,
  `volumefact` INT NOT NULL,
  `debt` INT NOT NULL,
  PRIMARY KEY (`id`),
  INDEX `currencyid_idx` (`currencyid` ASC)   ,
  INDEX `invoiceid_idx` (`invoiceid` ASC)   ,
  INDEX `accountantid_idx` (`accountantid` ASC)   ,
  CONSTRAINT `currencyid`
    FOREIGN KEY (`currencyid`)
    REFERENCES `cafeshka`.`Currencies` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `invoiceid`
    FOREIGN KEY (`invoiceid`)
    REFERENCES `cafeshka`.`Invoices` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `accountantid`
    FOREIGN KEY (`accountantid`)
    REFERENCES `cafeshka`.`Workers` (`id`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
